# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ•´ç†è¨ˆç”»

## ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

**ç¾çŠ¶**: ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã«115å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ•£åœ¨ã—ã¦ãŠã‚Šã€ä¿å®ˆæ€§ã¨å¯èª­æ€§ãŒä½ä¸‹ã—ã¦ã„ã¾ã™ã€‚

**ç›®æ¨™**: è«–ç†çš„ãªãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã¸ã®å†ç·¨æˆã«ã‚ˆã‚Šã€é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Šã¨ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ç†è§£å®¹æ˜“æ€§ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

**å½±éŸ¿ç¯„å›²**: Pythonãƒ•ã‚¡ã‚¤ãƒ« 53å€‹ã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ 20å€‹ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« 11å€‹ã€ãã®ä»–

---

## 1. ç¾çŠ¶åˆ†æ

### 1.1 ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«åˆ†é¡

#### A. ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ3ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- **web_app.py** - Flask Web UIãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- **release_notifier.py** - ãƒªãƒªãƒ¼ã‚¹é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
- **dashboard_main.py** - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ©Ÿèƒ½çµ±åˆç‰ˆ

#### B. èªè¨¼ãƒ»OAuthé–¢é€£ï¼ˆ6ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- auth_config.py
- oauth_setup_helper.py
- create_token.py
- create_token_simple.py
- create_token_improved.py
- create_token_manual.py
- generate_token.py

#### C. ãƒ†ã‚¹ãƒˆé–¢é€£ï¼ˆ25ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
**ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ç³»**:
- test_runner.py
- simple_test_runner.py
- run_check.py
- run_failing_tests.py
- simple_test_check.py
- analyze_tests.py
- examine_test_content.py

**æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆç³»**:
- test_email_delivery.py
- test_gmail_auth.py
- test_smtp_email.py
- test_mailer_improvements.py
- test_notification.py
- test_secret_key.py
- test_backend_api.py
- test_enhanced_backend.py
- test_phase2_implementation.py
- test_discovery.py

**ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ç³»**:
- get_test_info.py
- list_tests.py
- verify_tests.py
- fix_all_tests.py
- fix_tests_final.py
- run_fixed_tests.py
- simple_phase2_test.py

#### D. ã‚·ã‚¹ãƒ†ãƒ ä¿®å¾©ãƒ»ç›£è¦–ï¼ˆ8ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- auto_repair_loop.py
- continuous_monitor.py
- fix_config_errors.py
- fix_database_integrity.py
- validate_system.py
- performance_benchmark.py
- check_structure.py
- check_doc_references.py

#### E. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»åˆæœŸåŒ–ï¼ˆ6ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- setup.py
- setup_system.py
- init_demo_db.py
- example_usage.py
- direct_file_check.py
- security_qa_cli.py

#### F. é–‹ç™ºãƒ„ãƒ¼ãƒ«ï¼ˆ3ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- auto_fix_lint.py
- fix_f821_imports.py
- web_ui.py (æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³)

#### G. ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ20ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
**èµ·å‹•ç³»**:
- start_web_ui.py (ã“ã‚Œã¯Python)
- start_mangaanime_web.sh
- start_webui_manual.sh
- start-automation.sh
- start-local-repair.sh
- start-repair-background.sh
- start_integrated_ai_development.sh

**ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ç³»**:
- setup_cron.sh
- setup_email.sh
- setup_env.sh
- install_auto_startup.sh
- install_webui_autostart.sh

**é‹ç”¨ç³»**:
- run_now.sh
- run_validation.sh
- quick_start.sh
- run_claude_autoloop.sh
- local-repair-system.sh
- show_webui_access.sh

**ãƒ†ã‚¹ãƒˆç³»**:
- check_tests.sh
- test-repair-demo.sh

**ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç³»**:
- backup_full.sh

#### H. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ11 JSONãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š**:
- config.json (ãƒ¡ã‚¤ãƒ³è¨­å®š)
- config.json.template
- settings.local.json
- package.json
- package-lock.json

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**:
- gmail_config.json.template

**ãƒ¬ãƒãƒ¼ãƒˆç³»**:
- CRITICAL_FIXES_REPORT.json
- performance-regression-report.json
- phase2_test_results.json
- qa_audit_report.json
- security_audit_report.json
- repair_summary.json
- DOC_REFERENCE_REPORT.json

#### I. ãã®ä»–ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- .env
- .env.example
- .env.template
- .gitignore
- agents.yaml
- pytest.ini
- playwright.config.ts
- Makefile
- Makefile.new

#### J. ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«
- db.sqlite3
- .coverage

#### K. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆ3ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- README.md
- READMEæ—¥æœ¬èªç‰ˆ.md
- CLAUDE.md

#### L. å‡ºåŠ›ãƒ»ãƒ­ã‚°ç³»ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ8ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- coverage_output.txt
- test_results.txt
- test_summary.txt
- init_output.txt
- temp_file_check.txt

#### M. ä¾å­˜é–¢ä¿‚ç®¡ç†
- requirements.txt
- requirements-dev.txt
- requirements-backend-enhanced.txt

#### N. ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©
- local-automation.service
- mangaanime-web.service

#### O. ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«
- create_pr.bat

#### P. SQLãƒ•ã‚¡ã‚¤ãƒ«
- optimize_database.sql

#### Q. è‡ªå‹•åŒ–ãƒ»CI/CDé–¢é€£
- .automation-state.json
- .ci-trigger
- .ci-test-trigger
- .repair-state.json

---

## 2. æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ è¨­è¨ˆ

```
MangaAnime-Info-delivery-system/
â”‚
â”œâ”€â”€ app/                          # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ main.py -> ../web_app.py (ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã¾ãŸã¯ç§»å‹•)
â”‚   â”œâ”€â”€ web_app.py                # Flask Web UI
â”‚   â”œâ”€â”€ release_notifier.py       # ãƒªãƒªãƒ¼ã‚¹é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â””â”€â”€ dashboard_main.py         # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±åˆç‰ˆ
â”‚
â”œâ”€â”€ modules/                      # âœ… æ—¢å­˜ï¼ˆã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ anime_anilist.py
â”‚   â”œâ”€â”€ manga_rss.py
â”‚   â”œâ”€â”€ filter_logic.py
â”‚   â”œâ”€â”€ db.py
â”‚   â”œâ”€â”€ mailer.py
â”‚   â””â”€â”€ ... (ãã®ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«)
â”‚
â”œâ”€â”€ src/                          # âœ… æ—¢å­˜ï¼ˆçµ±åˆã¨ãƒ¡ãƒ¢ãƒªç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ integrations/
â”‚   â””â”€â”€ memory/
â”‚
â”œâ”€â”€ config/                       # âœ… æ—¢å­˜ï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚   â”œâ”€â”€ config.json               # ãƒ¡ã‚¤ãƒ³è¨­å®š
â”‚   â”œâ”€â”€ config.json.template
â”‚   â”œâ”€â”€ gmail_config.json.template
â”‚   â”œâ”€â”€ settings.local.json
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ .env.example
â”‚   â””â”€â”€ .env.template
â”‚
â”œâ”€â”€ auth/                         # ğŸ†• èªè¨¼é–¢é€£
â”‚   â”œâ”€â”€ oauth_setup_helper.py
â”‚   â”œâ”€â”€ auth_config.py
â”‚   â””â”€â”€ token_generators/
â”‚       â”œâ”€â”€ create_token.py
â”‚       â”œâ”€â”€ create_token_simple.py
â”‚       â”œâ”€â”€ create_token_improved.py
â”‚       â”œâ”€â”€ create_token_manual.py
â”‚       â””â”€â”€ generate_token.py
â”‚
â”œâ”€â”€ scripts/                      # âœ… æ—¢å­˜ - é‹ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ‹¡å¼µï¼‰
â”‚   â”œâ”€â”€ startup/                  # ğŸ†• èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”‚   â”œâ”€â”€ start_web.sh
â”‚   â”‚   â”œâ”€â”€ start_automation.sh
â”‚   â”‚   â”œâ”€â”€ start_repair.sh
â”‚   â”‚   â””â”€â”€ quick_start.sh
â”‚   â”‚
â”‚   â”œâ”€â”€ setup/                    # ğŸ†• ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”‚   â”œâ”€â”€ setup_cron.sh
â”‚   â”‚   â”œâ”€â”€ setup_email.sh
â”‚   â”‚   â”œâ”€â”€ setup_env.sh
â”‚   â”‚   â”œâ”€â”€ install_auto_startup.sh
â”‚   â”‚   â””â”€â”€ install_webui_autostart.sh
â”‚   â”‚
â”‚   â”œâ”€â”€ maintenance/              # ğŸ†• ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”‚   â”œâ”€â”€ backup_full.sh
â”‚   â”‚   â”œâ”€â”€ validate.sh
â”‚   â”‚   â””â”€â”€ run_validation.sh
â”‚   â”‚
â”‚   â””â”€â”€ ... (æ—¢å­˜ã®Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆ)
â”‚
â”œâ”€â”€ tools/                        # ğŸ†• é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ monitoring/
â”‚   â”‚   â”œâ”€â”€ continuous_monitor.py
â”‚   â”‚   â”œâ”€â”€ performance_benchmark.py
â”‚   â”‚   â””â”€â”€ check_structure.py
â”‚   â”‚
â”‚   â”œâ”€â”€ repair/
â”‚   â”‚   â”œâ”€â”€ auto_repair_loop.py
â”‚   â”‚   â”œâ”€â”€ fix_config_errors.py
â”‚   â”‚   â””â”€â”€ fix_database_integrity.py
â”‚   â”‚
â”‚   â”œâ”€â”€ validation/
â”‚   â”‚   â”œâ”€â”€ validate_system.py
â”‚   â”‚   â””â”€â”€ check_doc_references.py
â”‚   â”‚
â”‚   â”œâ”€â”€ linting/
â”‚   â”‚   â”œâ”€â”€ auto_fix_lint.py
â”‚   â”‚   â””â”€â”€ fix_f821_imports.py
â”‚   â”‚
â”‚   â””â”€â”€ setup/
â”‚       â”œâ”€â”€ setup.py
â”‚       â”œâ”€â”€ setup_system.py
â”‚       â”œâ”€â”€ init_demo_db.py
â”‚       â””â”€â”€ security_qa_cli.py
â”‚
â”œâ”€â”€ tests/                        # âœ… æ—¢å­˜ï¼ˆãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼‰
â”‚   â”œâ”€â”€ unit/                     # ğŸ†• ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ test_filtering.py
â”‚   â”‚   â”œâ”€â”€ test_database_fixed.py
â”‚   â”‚   â””â”€â”€ test_anilist_api.py
â”‚   â”‚
â”‚   â”œâ”€â”€ integration/              # ğŸ†• çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ test_enhanced_backend_integration.py
â”‚   â”‚   â”œâ”€â”€ test_mailer_integration.py
â”‚   â”‚   â””â”€â”€ test_google_apis.py
â”‚   â”‚
â”‚   â”œâ”€â”€ e2e/                      # ğŸ†• E2Eãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ test_backend_api.py
â”‚   â”‚   â”œâ”€â”€ test_enhanced_backend.py
â”‚   â”‚   â””â”€â”€ test_phase2_implementation.py
â”‚   â”‚
â”‚   â”œâ”€â”€ security/                 # ğŸ†• ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â””â”€â”€ test_security_comprehensive.py
â”‚   â”‚
â”‚   â”œâ”€â”€ runners/                  # ğŸ†• ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼
â”‚   â”‚   â”œâ”€â”€ test_runner.py
â”‚   â”‚   â”œâ”€â”€ simple_test_runner.py
â”‚   â”‚   â”œâ”€â”€ run_check.py
â”‚   â”‚   â”œâ”€â”€ run_failing_tests.py
â”‚   â”‚   â””â”€â”€ simple_test_check.py
â”‚   â”‚
â”‚   â”œâ”€â”€ utilities/                # ğŸ†• ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ get_test_info.py
â”‚   â”‚   â”œâ”€â”€ list_tests.py
â”‚   â”‚   â”œâ”€â”€ verify_tests.py
â”‚   â”‚   â”œâ”€â”€ analyze_tests.py
â”‚   â”‚   â””â”€â”€ examine_test_content.py
â”‚   â”‚
â”‚   â”œâ”€â”€ fixtures/                 # ğŸ†• ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
â”‚   â”‚   â””â”€â”€ (ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿)
â”‚   â”‚
â”‚   â””â”€â”€ test_*.py                 # ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã‹ã‚‰ç§»å‹•
â”‚
â”œâ”€â”€ bin/                          # ğŸ†• å®Ÿè¡Œå¯èƒ½ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆï¼‰
â”‚   â”œâ”€â”€ run_notifier              # release_notifier.pyã¸ã®ãƒ©ãƒƒãƒ‘ãƒ¼
â”‚   â”œâ”€â”€ run_webapp                # web_app.pyã¸ã®ãƒ©ãƒƒãƒ‘ãƒ¼
â”‚   â””â”€â”€ run_dashboard             # dashboard_main.pyã¸ã®ãƒ©ãƒƒãƒ‘ãƒ¼
â”‚
â”œâ”€â”€ data/                         # ğŸ†• ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ db.sqlite3                # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”‚   â””â”€â”€ backups/                  # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¿å­˜å…ˆ
â”‚
â”œâ”€â”€ logs/                         # âœ… æ—¢å­˜ï¼ˆãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚
â”œâ”€â”€ docs/                         # âœ… æ—¢å­˜ï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ READMEæ—¥æœ¬èªç‰ˆ.md
â”‚   â”œâ”€â”€ CLAUDE.md
â”‚   â””â”€â”€ ARCHITECTURE_REFACTORING_PROPOSAL.md (ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚
â”œâ”€â”€ reports/                      # ğŸ†• ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›
â”‚   â”œâ”€â”€ security_audit_report.json
â”‚   â”œâ”€â”€ qa_audit_report.json
â”‚   â”œâ”€â”€ performance-regression-report.json
â”‚   â”œâ”€â”€ CRITICAL_FIXES_REPORT.json
â”‚   â”œâ”€â”€ DOC_REFERENCE_REPORT.json
â”‚   â”œâ”€â”€ phase2_test_results.json
â”‚   â””â”€â”€ repair_summary.json
â”‚
â”œâ”€â”€ output/                       # ğŸ†• ä¸€æ™‚å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ coverage_output.txt
â”‚   â”œâ”€â”€ test_results.txt
â”‚   â”œâ”€â”€ test_summary.txt
â”‚   â”œâ”€â”€ init_output.txt
â”‚   â””â”€â”€ temp_file_check.txt
â”‚
â”œâ”€â”€ systemd/                      # ğŸ†• systemdã‚µãƒ¼ãƒ“ã‚¹å®šç¾©
â”‚   â”œâ”€â”€ local-automation.service
â”‚   â””â”€â”€ mangaanime-web.service
â”‚
â”œâ”€â”€ database/                     # ğŸ†• ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£
â”‚   â””â”€â”€ migrations/
â”‚       â””â”€â”€ optimize_database.sql
â”‚
â”œâ”€â”€ static/                       # âœ… æ—¢å­˜ï¼ˆé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”œâ”€â”€ templates/                    # âœ… æ—¢å­˜ï¼ˆHTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰
â”‚
â”œâ”€â”€ .claude/                      # âœ… æ—¢å­˜ï¼ˆClaudeè¨­å®šï¼‰
â”œâ”€â”€ .github/                      # âœ… æ—¢å­˜ï¼ˆGitHub Actionsï¼‰
â”œâ”€â”€ workflows/                    # âœ… æ—¢å­˜ï¼ˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®šç¾©ï¼‰
â”‚
â”œâ”€â”€ archive/                      # ğŸ†• éæ¨å¥¨ãƒ»æ—§ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ old_versions/
â”‚   â”‚   â”œâ”€â”€ web_ui.py (æ—§ç‰ˆ)
â”‚   â”‚   â””â”€â”€ Makefile.new
â”‚   â””â”€â”€ deprecated/
â”‚       â”œâ”€â”€ create_token_improved.py (çµ±åˆæ¸ˆã¿)
â”‚       â””â”€â”€ create_token_manual.py (çµ±åˆæ¸ˆã¿)
â”‚
â”œâ”€â”€ .automation-state.json
â”œâ”€â”€ .ci-trigger
â”œâ”€â”€ .ci-test-trigger
â”œâ”€â”€ .coverage
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .repair-state.json
â”œâ”€â”€ agents.yaml
â”œâ”€â”€ pytest.ini
â”œâ”€â”€ playwright.config.ts
â”œâ”€â”€ Makefile
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ requirements-dev.txt
â”œâ”€â”€ requirements-backend-enhanced.txt
â””â”€â”€ create_pr.bat
```

---

## 3. ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•è¨ˆç”»è©³ç´°

### 3.1 ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ä½œæˆ

```bash
mkdir -p app
mkdir -p auth/token_generators
mkdir -p scripts/{startup,setup,maintenance}
mkdir -p tools/{monitoring,repair,validation,linting,setup}
mkdir -p tests/{unit,integration,e2e,security,runners,utilities,fixtures}
mkdir -p bin
mkdir -p data/backups
mkdir -p docs
mkdir -p reports
mkdir -p output
mkdir -p systemd
mkdir -p database/migrations
mkdir -p archive/{old_versions,deprecated}
```

### 3.2 ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç§»å‹•

| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ | èª¬æ˜ |
|--------|--------|------|
| web_app.py | app/web_app.py | Flask Web UIãƒ¡ã‚¤ãƒ³ |
| release_notifier.py | app/release_notifier.py | ãƒªãƒªãƒ¼ã‚¹é€šçŸ¥ãƒ¡ã‚¤ãƒ³ |
| dashboard_main.py | app/dashboard_main.py | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³ |

**å½±éŸ¿åˆ†æ**:
- scriptsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰ã®å‚ç…§ã‚’ä¿®æ­£
- bin/ã«ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½œæˆ

### 3.3 ãƒ•ã‚§ãƒ¼ã‚º3: èªè¨¼é–¢é€£ã®ç§»å‹•

| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| auth_config.py | auth/auth_config.py |
| oauth_setup_helper.py | auth/oauth_setup_helper.py |
| create_token.py | auth/token_generators/create_token.py |
| create_token_simple.py | auth/token_generators/create_token_simple.py |
| create_token_improved.py | archive/deprecated/create_token_improved.py |
| create_token_manual.py | archive/deprecated/create_token_manual.py |
| generate_token.py | auth/token_generators/generate_token.py |

### 3.4 ãƒ•ã‚§ãƒ¼ã‚º4: ãƒ†ã‚¹ãƒˆé–¢é€£ã®æ•´ç†

#### A. ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| test_runner.py | tests/runners/test_runner.py |
| simple_test_runner.py | tests/runners/simple_test_runner.py |
| run_check.py | tests/runners/run_check.py |
| run_failing_tests.py | tests/runners/run_failing_tests.py |
| simple_test_check.py | tests/runners/simple_test_check.py |

#### B. ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| analyze_tests.py | tests/utilities/analyze_tests.py |
| examine_test_content.py | tests/utilities/examine_test_content.py |
| get_test_info.py | tests/utilities/get_test_info.py |
| list_tests.py | tests/utilities/list_tests.py |
| verify_tests.py | tests/utilities/verify_tests.py |
| fix_all_tests.py | tests/utilities/fix_all_tests.py |
| fix_tests_final.py | tests/utilities/fix_tests_final.py |
| run_fixed_tests.py | tests/utilities/run_fixed_tests.py |
| simple_phase2_test.py | tests/utilities/simple_phase2_test.py |
| test_discovery.py | tests/utilities/test_discovery.py |

#### C. E2Eãƒ†ã‚¹ãƒˆ
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| test_backend_api.py | tests/e2e/test_backend_api.py |
| test_enhanced_backend.py | tests/e2e/test_enhanced_backend.py |
| test_phase2_implementation.py | tests/e2e/test_phase2_implementation.py |

#### D. ãƒ¡ãƒ¼ãƒ«/èªè¨¼ãƒ†ã‚¹ãƒˆ
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| test_email_delivery.py | tests/integration/test_email_delivery.py |
| test_gmail_auth.py | tests/integration/test_gmail_auth.py |
| test_smtp_email.py | tests/integration/test_smtp_email.py |
| test_mailer_improvements.py | tests/integration/test_mailer_improvements.py |
| test_notification.py | tests/integration/test_notification.py |
| test_secret_key.py | tests/integration/test_secret_key.py |

### 3.5 ãƒ•ã‚§ãƒ¼ã‚º5: ãƒ„ãƒ¼ãƒ«é¡ã®ç§»å‹•

#### A. ç›£è¦–ãƒ„ãƒ¼ãƒ«
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| continuous_monitor.py | tools/monitoring/continuous_monitor.py |
| performance_benchmark.py | tools/monitoring/performance_benchmark.py |
| check_structure.py | tools/monitoring/check_structure.py |
| check_doc_references.py | tools/monitoring/check_doc_references.py |

#### B. ä¿®å¾©ãƒ„ãƒ¼ãƒ«
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| auto_repair_loop.py | tools/repair/auto_repair_loop.py |
| fix_config_errors.py | tools/repair/fix_config_errors.py |
| fix_database_integrity.py | tools/repair/fix_database_integrity.py |

#### C. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| validate_system.py | tools/validation/validate_system.py |

#### D. Lintingãƒ„ãƒ¼ãƒ«
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| auto_fix_lint.py | tools/linting/auto_fix_lint.py |
| fix_f821_imports.py | tools/linting/fix_f821_imports.py |

#### E. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ„ãƒ¼ãƒ«
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| setup.py | tools/setup/setup.py |
| setup_system.py | tools/setup/setup_system.py |
| init_demo_db.py | tools/setup/init_demo_db.py |
| security_qa_cli.py | tools/setup/security_qa_cli.py |
| example_usage.py | tools/setup/example_usage.py |
| direct_file_check.py | tools/setup/direct_file_check.py |

### 3.6 ãƒ•ã‚§ãƒ¼ã‚º6: ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ•´ç†

#### A. èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| start_mangaanime_web.sh | scripts/startup/start_web.sh |
| start_webui_manual.sh | scripts/startup/start_webui.sh |
| start-automation.sh | scripts/startup/start_automation.sh |
| start-local-repair.sh | scripts/startup/start_repair.sh |
| start-repair-background.sh | scripts/startup/start_repair_bg.sh |
| start_integrated_ai_development.sh | scripts/startup/start_ai_dev.sh |
| quick_start.sh | scripts/startup/quick_start.sh |
| run_now.sh | scripts/startup/run_now.sh |
| run_claude_autoloop.sh | scripts/startup/run_claude.sh |

#### B. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| setup_cron.sh | scripts/setup/setup_cron.sh |
| setup_email.sh | scripts/setup/setup_email.sh |
| setup_env.sh | scripts/setup/setup_env.sh |
| install_auto_startup.sh | scripts/setup/install_autostart.sh |
| install_webui_autostart.sh | scripts/setup/install_webui_autostart.sh |

#### C. ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| backup_full.sh | scripts/maintenance/backup_full.sh |
| run_validation.sh | scripts/maintenance/validate.sh |
| check_tests.sh | scripts/maintenance/check_tests.sh |
| test-repair-demo.sh | scripts/maintenance/test_repair.sh |
| local-repair-system.sh | scripts/maintenance/repair_system.sh |
| show_webui_access.sh | scripts/maintenance/show_access.sh |

### 3.7 ãƒ•ã‚§ãƒ¼ã‚º7: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ãƒ¼ã‚¿ã®ç§»å‹•

#### A. ãƒ¬ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| CRITICAL_FIXES_REPORT.json | reports/critical_fixes.json |
| performance-regression-report.json | reports/performance_regression.json |
| phase2_test_results.json | reports/phase2_test_results.json |
| qa_audit_report.json | reports/qa_audit.json |
| security_audit_report.json | reports/security_audit.json |
| repair_summary.json | reports/repair_summary.json |
| DOC_REFERENCE_REPORT.json | reports/doc_references.json |

#### B. å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| coverage_output.txt | output/coverage.txt |
| test_results.txt | output/test_results.txt |
| test_summary.txt | output/test_summary.txt |
| init_output.txt | output/init_output.txt |
| temp_file_check.txt | output/temp_file_check.txt |

#### C. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| db.sqlite3 | data/db.sqlite3 |

#### D. systemdã‚µãƒ¼ãƒ“ã‚¹
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| local-automation.service | systemd/local-automation.service |
| mangaanime-web.service | systemd/mangaanime-web.service |

#### E. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| optimize_database.sql | database/migrations/optimize_database.sql |

### 3.8 ãƒ•ã‚§ãƒ¼ã‚º8: ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

#### A. æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| web_ui.py | archive/old_versions/web_ui_old.py |
| Makefile.new | archive/old_versions/Makefile.new |

#### B. éæ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«
| ç§»å‹•å…ƒ | ç§»å‹•å…ˆ |
|--------|--------|
| start_web_ui.py | archive/deprecated/start_web_ui.py |

---

## 4. importæ–‡ãƒ»å‚ç…§ã®å½±éŸ¿åˆ†æ

### 4.1 Python Importæ–‡ã®å½±éŸ¿

#### å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ19ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèªæ¸ˆã¿ï¼‰

1. **security_qa_cli.py** - 2ç®‡æ‰€
2. **test_backend_api.py** - 1ç®‡æ‰€
3. **example_usage.py** - 1ç®‡æ‰€
4. **dashboard_main.py** - 8ç®‡æ‰€
5. **web_ui.py** - 3ç®‡æ‰€
6. **release_notifier.py** - 4ç®‡æ‰€
7. **test_phase2_implementation.py** - 4ç®‡æ‰€
8. **test_notification.py** - 5ç®‡æ‰€
9. **test_email_delivery.py** - 3ç®‡æ‰€
10. **tests/test_filtering.py** - 1ç®‡æ‰€
11. **tests/test_enhanced_backend_integration.py** - 6ç®‡æ‰€
12. **tests/test_database_fixed.py** - 1ç®‡æ‰€
13. **tests/test_security_comprehensive.py** - 3ç®‡æ‰€
14. **tests/test_qa_comprehensive.py** - 1ç®‡æ‰€
15. **tests/test_anilist_api.py** - 1ç®‡æ‰€
16. **tests/test_mailer_integration.py** - 1ç®‡æ‰€
17. **tests/test_google_apis.py** - 2ç®‡æ‰€
18. **scripts/send_pending_notifications.py** - 1ç®‡æ‰€
19. **modules/security_compliance.py** - 1ç®‡æ‰€

**åˆè¨ˆ**: 49ç®‡æ‰€ã®`from modules`ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

#### ä¿®æ­£æ–¹é‡

**modulesãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ç§»å‹•ã—ãªã„** ãŸã‚ã€ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã‹ã‚‰ç§»å‹•ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã‚’èª¿æ•´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

##### ä¾‹: app/release_notifier.py

```python
# ç§»å‹•å‰ï¼ˆãƒ«ãƒ¼ãƒˆç›´ä¸‹ï¼‰
from modules import get_config
from modules.db import DatabaseManager

# ç§»å‹•å¾Œï¼ˆapp/é…ä¸‹ï¼‰
import sys
from pathlib import Path
sys.path.insert(0, str(Path(__file__).parent.parent))

from modules import get_config
from modules.db import DatabaseManager
```

ã¾ãŸã¯ã€ç›¸å¯¾ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨:

```python
# app/release_notifier.py
import sys
sys.path.append('..')

from modules import get_config
from modules.db import DatabaseManager
```

##### ä¾‹: tests/e2e/test_backend_api.py

```python
# ç§»å‹•å‰
from modules.backend_validator import validate_backend

# ç§»å‹•å¾Œ
import sys
from pathlib import Path
sys.path.insert(0, str(Path(__file__).parent.parent.parent))

from modules.backend_validator import validate_backend
```

### 4.2 ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‘ã‚¹å‚ç…§å½±éŸ¿

#### å½±éŸ¿ä¾‹

##### scripts/startup/quick_start.shï¼ˆç§»å‹•å¾Œï¼‰

```bash
# ç§»å‹•å‰
python3 web_app.py

# ç§»å‹•å¾Œ
python3 ../../app/web_app.py
```

ã¾ãŸã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã¸ã®ç§»å‹•ã‚’è¿½åŠ :

```bash
#!/bin/bash
cd "$(dirname "$0")/../.."  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã¸
python3 app/web_app.py
```

### 4.3 è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹å‚ç…§

#### config/config.json

```json
{
  "database_path": "../data/db.sqlite3"
}
```

#### ç’°å¢ƒå¤‰æ•°ã®æ›´æ–°

```bash
# .env
DATABASE_PATH=./data/db.sqlite3
LOG_DIR=./logs
```

---

## 5. ç§»è¡Œãƒªã‚¹ã‚¯ã¨è»½æ¸›ç­–

### 5.1 ãƒªã‚¹ã‚¯è©•ä¾¡

| ãƒªã‚¹ã‚¯ | æ·±åˆ»åº¦ | ç¢ºç‡ | è»½æ¸›ç­– |
|--------|--------|------|--------|
| ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ã®ç ´æ | é«˜ | ä¸­ | è‡ªå‹•ãƒ†ã‚¹ãƒˆã€æ®µéšçš„ç§»è¡Œ |
| ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼ | ä¸­ | ä¸­ | ãƒ‘ã‚¹æ­£è¦åŒ–ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ |
| æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®æ¶ˆå¤± | é«˜ | ä½ | å®Œå…¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— |
| CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ç ´æ | ä¸­ | ä½ | .github/workflowsæ›´æ–° |

### 5.2 è»½æ¸›ç­–è©³ç´°

#### A. å®Œå…¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å®Ÿæ–½

```bash
bash backup_full.sh
```

#### B. Gitä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã®ä½œæˆ

```bash
git checkout -b refactor/folder-structure
```

#### C. æ®µéšçš„ãªç§»è¡Œ

1. ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
2. ãƒ•ã‚§ãƒ¼ã‚º2: ã‚³ãƒ”ãƒ¼ï¼ˆç§»å‹•ã§ã¯ãªãï¼‰
3. ãƒ•ã‚§ãƒ¼ã‚º3: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ä¿®æ­£
4. ãƒ•ã‚§ãƒ¼ã‚º4: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
5. ãƒ•ã‚§ãƒ¼ã‚º5: å•é¡Œãªã‘ã‚Œã°å…ƒãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤

#### D. è‡ªå‹•ãƒ†ã‚¹ãƒˆã«ã‚ˆã‚‹æ¤œè¨¼

å„ãƒ•ã‚§ãƒ¼ã‚ºå¾Œã«ä»¥ä¸‹ã‚’å®Ÿè¡Œ:

```bash
pytest tests/ -v
python3 tools/validation/validate_system.py
```

#### E. ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã«ã‚ˆã‚‹äº’æ›æ€§ç¶­æŒï¼ˆä¸€æ™‚çš„ï¼‰

```bash
# ä¾‹: web_app.pyã¸ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯
ln -s app/web_app.py web_app.py
```

ç§»è¡Œå®Œäº†å¾Œã«å‰Šé™¤ã€‚

---

## 6. å®Ÿè£…æ‰‹é †

### 6.1 æº–å‚™ãƒ•ã‚§ãƒ¼ã‚º

1. **å®Œå…¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**
   ```bash
   bash backup_full.sh
   git add -A
   git commit -m "[ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—] ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ æ•´ç†å‰ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ"
   ```

2. **ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒä½œæˆ**
   ```bash
   git checkout -b refactor/folder-structure-reorganization
   ```

3. **ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ**
   ```bash
   pytest tests/ -v > output/baseline_tests.txt
   ```

### 6.2 å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
bash scripts/create_new_structure.sh
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆè‡ªå‹•åŒ–ï¼‰

```bash
bash scripts/migrate_files.sh --phase 1  # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
bash scripts/migrate_files.sh --phase 2  # èªè¨¼
bash scripts/migrate_files.sh --phase 3  # ãƒ†ã‚¹ãƒˆ
bash scripts/migrate_files.sh --phase 4  # ãƒ„ãƒ¼ãƒ«
bash scripts/migrate_files.sh --phase 5  # ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
bash scripts/migrate_files.sh --phase 6  # ãƒ‡ãƒ¼ã‚¿
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹è‡ªå‹•ä¿®æ­£

```bash
python3 tools/setup/fix_import_paths.py
```

#### ã‚¹ãƒ†ãƒƒãƒ—4: æ¤œè¨¼ãƒ†ã‚¹ãƒˆ

```bash
pytest tests/ -v
python3 tools/validation/validate_system.py
bash scripts/maintenance/check_tests.sh
```

#### ã‚¹ãƒ†ãƒƒãƒ—5: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯å‰Šé™¤
find . -maxdepth 1 -type l -delete

# ç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‰Šé™¤
find . -type d -empty -delete
```

### 6.3 æ¤œè¨¼ãƒ•ã‚§ãƒ¼ã‚º

1. **æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**
   - Web UIã®èµ·å‹•ç¢ºèª
   - ãƒªãƒªãƒ¼ã‚¹é€šçŸ¥ã®å®Ÿè¡Œç¢ºèª
   - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®å‹•ä½œç¢ºèª

2. **çµ±åˆãƒ†ã‚¹ãƒˆ**
   ```bash
   pytest tests/integration/ -v
   ```

3. **E2Eãƒ†ã‚¹ãƒˆ**
   ```bash
   pytest tests/e2e/ -v
   ```

4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**
   ```bash
   python3 tools/monitoring/performance_benchmark.py
   ```

### 6.4 ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ã‚§ãƒ¼ã‚º

1. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°**
   - README.md
   - CLAUDE.md
   - docs/å†…ã®å„ç¨®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

2. **CI/CDè¨­å®šæ›´æ–°**
   - .github/workflows/ã®å„ç¨®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

3. **ãƒãƒ¼ã‚¸**
   ```bash
   git add -A
   git commit -m "[ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°] ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã®æ•´ç†å®Œäº†"
   git checkout main
   git merge refactor/folder-structure-reorganization
   git push origin main
   ```

---

## 7. ä»Šå¾Œã®ä¿å®ˆæ–¹é‡

### 7.1 ãƒ•ã‚©ãƒ«ãƒ€é…ç½®ãƒ«ãƒ¼ãƒ«

| ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | ç”¨é€” | é…ç½®åŸºæº– |
|--------------|------|----------|
| app/ | ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | Flaskã€ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ |
| modules/ | ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ |
| tests/ | ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ | å…¨ã¦ã®ãƒ†ã‚¹ãƒˆ |
| tools/ | é–‹ç™ºãƒ„ãƒ¼ãƒ« | CLIã€ç›£è¦–ã€ä¿®å¾©ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| scripts/ | é‹ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | èµ·å‹•ã€ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ |
| config/ | è¨­å®š | JSONã€YAMLã€.env |
| data/ | ãƒ‡ãƒ¼ã‚¿ | DBã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— |
| reports/ | ãƒ¬ãƒãƒ¼ãƒˆ | JSONå½¢å¼ã®ãƒ¬ãƒãƒ¼ãƒˆ |
| output/ | ä¸€æ™‚å‡ºåŠ› | ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ |
| docs/ | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | Markdown |
| bin/ | å®Ÿè¡Œã‚¨ãƒ³ãƒˆãƒª | ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã‚³ãƒãƒ³ãƒ‰ |

### 7.2 ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

- **Pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: `snake_case.py`
- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `test_*.py`
- **ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: `å‹•è©_ç›®çš„èª.sh` (ä¾‹: `start_web.sh`)
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `åè©.json` ã¾ãŸã¯ `.env`
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: `å¤§æ–‡å­—å§‹ã¾ã‚Š.md`

### 7.3 å®šæœŸçš„ãªãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

1. **æœˆæ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼**: ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«æ•°ã‚’ãƒã‚§ãƒƒã‚¯
2. **å››åŠæœŸãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**: éæ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«ã®archiveåŒ–
3. **å¹´æ¬¡ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: archive/ã®å‰Šé™¤å¯èƒ½ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª

---

## 8. æˆåŠŸåŸºæº–

### 8.1 å®šé‡çš„æŒ‡æ¨™

- [ ] ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«æ•°: 115å€‹ â†’ 30å€‹ä»¥ä¸‹
- [ ] ãƒ†ã‚¹ãƒˆæˆåŠŸç‡: 100%ç¶­æŒ
- [ ] ãƒ“ãƒ«ãƒ‰æ™‚é–“: å¤‰åŒ–ãªã—ï¼ˆÂ±5%ä»¥å†…ï¼‰
- [ ] ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸: ä½ä¸‹ãªã—

### 8.2 å®šæ€§çš„æŒ‡æ¨™

- [ ] æ–°è¦é–‹ç™ºè€…ãŒ5åˆ†ä»¥å†…ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚’ç†è§£ã§ãã‚‹
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢æ™‚é–“ãŒ50%å‰Šæ¸›
- [ ] ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®åŠ¹ç‡ãŒå‘ä¸Š
- [ ] CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒæ­£å¸¸å‹•ä½œ

---

## 9. ä»˜éŒ²

### 9.1 è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹

#### scripts/create_new_structure.sh

```bash
#!/bin/bash
set -e

echo "Creating new directory structure..."

mkdir -p app
mkdir -p auth/token_generators
mkdir -p scripts/{startup,setup,maintenance}
mkdir -p tools/{monitoring,repair,validation,linting,setup}
mkdir -p tests/{unit,integration,e2e,security,runners,utilities,fixtures}
mkdir -p bin
mkdir -p data/backups
mkdir -p reports
mkdir -p output
mkdir -p systemd
mkdir -p database/migrations
mkdir -p archive/{old_versions,deprecated}

echo "Directory structure created successfully."
```

#### tools/setup/fix_import_paths.py

```python
#!/usr/bin/env python3
"""
Automatically fix import paths after folder restructuring
"""

import os
import re
from pathlib import Path

def fix_imports_in_file(file_path, depth):
    """
    Fix import statements based on new directory depth
    """
    with open(file_path, 'r', encoding='utf-8') as f:
        content = f.read()

    # Add sys.path adjustment at the top
    if 'from modules' in content or 'import modules' in content:
        sys_path_insert = f"""
import sys
from pathlib import Path
sys.path.insert(0, str(Path(__file__).parent{''.join(['.parent'] * depth)}))
"""
        # Insert after shebang and docstring
        lines = content.split('\n')
        insert_pos = 0
        for i, line in enumerate(lines):
            if line.startswith('#!') or line.startswith('"""'):
                continue
            if line.strip() and not line.startswith('#'):
                insert_pos = i
                break

        lines.insert(insert_pos, sys_path_insert)
        content = '\n'.join(lines)

    with open(file_path, 'w', encoding='utf-8') as f:
        f.write(content)

def main():
    # app/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (depth=1)
    for file in Path('app').glob('*.py'):
        fix_imports_in_file(file, 1)

    # tests/ ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (depth=2)
    for subdir in ['unit', 'integration', 'e2e', 'security', 'runners', 'utilities']:
        for file in Path(f'tests/{subdir}').glob('*.py'):
            fix_imports_in_file(file, 2)

    # tools/ ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (depth=2)
    for subdir in ['monitoring', 'repair', 'validation', 'linting', 'setup']:
        for file in Path(f'tools/{subdir}').glob('*.py'):
            fix_imports_in_file(file, 2)

    print("Import paths fixed successfully.")

if __name__ == '__main__':
    main()
```

### 9.2 æ¤œè¨¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```markdown
## ç§»è¡Œå¾Œæ¤œè¨¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### åŸºæœ¬å‹•ä½œç¢ºèª
- [ ] Web UIèµ·å‹• (`python3 app/web_app.py`)
- [ ] ãƒªãƒªãƒ¼ã‚¹é€šçŸ¥å®Ÿè¡Œ (`python3 app/release_notifier.py --dry-run`)
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰èµ·å‹• (`python3 app/dashboard_main.py`)

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ (`pytest tests/unit/ -v`)
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆ (`pytest tests/integration/ -v`)
- [ ] E2Eãƒ†ã‚¹ãƒˆ (`pytest tests/e2e/ -v`)
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ (`pytest tests/security/ -v`)

### ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
- [ ] èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (`bash scripts/startup/quick_start.sh`)
- [ ] ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (`bash scripts/setup/setup_env.sh`)
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (`bash scripts/maintenance/backup_full.sh`)

### ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
- [ ] ç›£è¦–ãƒ„ãƒ¼ãƒ« (`python3 tools/monitoring/check_structure.py`)
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ (`python3 tools/validation/validate_system.py`)
- [ ] Linting (`python3 tools/linting/auto_fix_lint.py`)

### CI/CD
- [ ] GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œç¢ºèª
- [ ] ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- [ ] ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸ

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [ ] README.md æ›´æ–°ç¢ºèª
- [ ] CLAUDE.md æ›´æ–°ç¢ºèª
- [ ] API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´åˆæ€§ç¢ºèª
```

---

## 10. ã¾ã¨ã‚

æœ¬ææ¡ˆã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®åŠ¹æœãŒæœŸå¾…ã§ãã¾ã™:

1. **å¯èª­æ€§å‘ä¸Š**: è«–ç†çš„ãªãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã«ã‚ˆã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²ãŒæ˜ç¢ºã«
2. **ä¿å®ˆæ€§å‘ä¸Š**: é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã«ã‚ˆã‚Šã€å¤‰æ›´å½±éŸ¿ç¯„å›²ãŒæ˜ç¢ºã«
3. **é–‹ç™ºåŠ¹ç‡å‘ä¸Š**: ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢æ™‚é–“ã®å‰Šæ¸›ã€æ–°è¦é–‹ç™ºè€…ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŸ­ç¸®
4. **å“è³ªå‘ä¸Š**: ãƒ†ã‚¹ãƒˆæ§‹é€ ã®æ•´ç†ã«ã‚ˆã‚Šã€ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãŒæ˜ç¢ºã«
5. **æ‹¡å¼µæ€§å‘ä¸Š**: æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã®é…ç½®å ´æ‰€ãŒæ˜ç¢ºã«

**æ¨å¥¨å®Ÿæ–½æ™‚æœŸ**: æ¬¡å›ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒªãƒªãƒ¼ã‚¹å‰
**æƒ³å®šä½œæ¥­æ™‚é–“**: 8-12æ™‚é–“ï¼ˆè‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½¿ç”¨æ™‚ï¼‰
**ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«**: ä¸­ï¼ˆé©åˆ‡ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨æ®µéšçš„ç§»è¡Œã«ã‚ˆã‚Šè»½æ¸›å¯èƒ½ï¼‰

---

**æ–‡æ›¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**ä½œæˆæ—¥**: 2025-11-14
**ä½œæˆè€…**: System Architecture Designer (Claude)
**æ‰¿èªè€…**: ï¼ˆæœªæ‰¿èªï¼‰
