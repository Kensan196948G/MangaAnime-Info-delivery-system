name: ðŸ”§ è‡ªå‹•ä¿®å¾©ã‚·ã‚¹ãƒ†ãƒ å¼·åŒ–ç‰ˆï¼ˆåŒ…æ‹¬çš„ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥ãƒ»Issueè‡ªå‹•ä½œæˆï¼‰

# 15åˆ†ã”ã¨ã«è‡ªå‹•å®Ÿè¡Œ + ãƒ—ãƒƒã‚·ãƒ¥æ™‚
on:
  schedule:
    - cron: '*/15 * * * *'  # 15åˆ†ã”ã¨
  push:
    branches: [main]
    paths:
      - 'app/**'
      - 'modules/**'
      - 'tests/**'
  workflow_dispatch:
    inputs:
      create_issue:
        description: 'ã‚¨ãƒ©ãƒ¼æ™‚ã«Issueã‚’ä½œæˆã™ã‚‹'
        required: false
        default: 'true'
        type: boolean
      run_tests:
        description: 'ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹'
        required: false
        default: 'true'
        type: boolean

permissions:
  contents: write
  issues: write
  pull-requests: write

env:
  PYTHON_VERSION: '3.12'

jobs:
  # ============================================
  # Job 1: ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥
  # ============================================
  detect-errors:
    name: ðŸ” ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥
    runs-on: ubuntu-latest
    timeout-minutes: 10
    outputs:
      has_syntax_errors: ${{ steps.syntax.outputs.has_errors }}
      has_import_errors: ${{ steps.imports.outputs.has_errors }}
      has_security_issues: ${{ steps.security.outputs.has_issues }}
      error_summary: ${{ steps.summary.outputs.summary }}
      total_errors: ${{ steps.summary.outputs.total }}

    steps:
      - name: ðŸ“¥ ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4

      - name: ðŸ Pythonç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        uses: actions/setup-python@v5
        with:
          python-version: ${{ env.PYTHON_VERSION }}
          cache: 'pip'

      - name: ðŸ“¦ ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: |
          pip install flake8 black isort mypy bandit safety
          pip install -r requirements.txt || true

      - name: ðŸ” æ§‹æ–‡ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥
        id: syntax
        continue-on-error: true
        run: |
          echo "## ðŸ” æ§‹æ–‡ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥" >> $GITHUB_STEP_SUMMARY

          # é‡å¤§ãªæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯
          flake8 app modules --count --select=E9,F63,F7,F82 --show-source --statistics > syntax_errors.txt 2>&1 || true

          error_count=$(tail -1 syntax_errors.txt | grep -oE '^[0-9]+' || echo "0")

          if [ "$error_count" -gt 0 ]; then
            echo "has_errors=true" >> $GITHUB_OUTPUT
            echo "count=$error_count" >> $GITHUB_OUTPUT
            echo "âŒ æ§‹æ–‡ã‚¨ãƒ©ãƒ¼: $error_count ä»¶" >> $GITHUB_STEP_SUMMARY
            cat syntax_errors.txt >> $GITHUB_STEP_SUMMARY
          else
            echo "has_errors=false" >> $GITHUB_OUTPUT
            echo "count=0" >> $GITHUB_OUTPUT
            echo "âœ… æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãªã—" >> $GITHUB_STEP_SUMMARY
          fi

      - name: ðŸ” ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼æ¤œçŸ¥
        id: imports
        continue-on-error: true
        run: |
          echo "## ðŸ” ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼æ¤œçŸ¥" >> $GITHUB_STEP_SUMMARY

          # Pythonãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒã‚§ãƒƒã‚¯
          import_errors=0
          for file in $(find app modules -name "*.py" -type f 2>/dev/null); do
            python3 -c "import ast; ast.parse(open('$file').read())" 2>/dev/null || {
              echo "âŒ $file" >> import_errors.txt
              ((import_errors++)) || true
            }
          done

          if [ "$import_errors" -gt 0 ]; then
            echo "has_errors=true" >> $GITHUB_OUTPUT
            echo "count=$import_errors" >> $GITHUB_OUTPUT
            echo "âŒ ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼: $import_errors ä»¶" >> $GITHUB_STEP_SUMMARY
          else
            echo "has_errors=false" >> $GITHUB_OUTPUT
            echo "count=0" >> $GITHUB_OUTPUT
            echo "âœ… ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ãªã—" >> $GITHUB_STEP_SUMMARY
          fi

      - name: ðŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
        id: security
        continue-on-error: true
        run: |
          echo "## ðŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³" >> $GITHUB_STEP_SUMMARY

          # Banditã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
          bandit -r app modules -ll -ii -f txt > security_report.txt 2>&1 || true

          high_issues=$(grep -c "Severity: High" security_report.txt 2>/dev/null || echo "0")
          medium_issues=$(grep -c "Severity: Medium" security_report.txt 2>/dev/null || echo "0")

          if [ "$high_issues" -gt 0 ]; then
            echo "has_issues=true" >> $GITHUB_OUTPUT
            echo "high=$high_issues" >> $GITHUB_OUTPUT
            echo "medium=$medium_issues" >> $GITHUB_OUTPUT
            echo "âŒ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œ: High=$high_issues, Medium=$medium_issues" >> $GITHUB_STEP_SUMMARY
          else
            echo "has_issues=false" >> $GITHUB_OUTPUT
            echo "high=0" >> $GITHUB_OUTPUT
            echo "medium=$medium_issues" >> $GITHUB_OUTPUT
            echo "âœ… é‡å¤§ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œãªã—" >> $GITHUB_STEP_SUMMARY
          fi

      - name: ðŸ“Š ã‚¨ãƒ©ãƒ¼ã‚µãƒžãƒªãƒ¼ä½œæˆ
        id: summary
        run: |
          syntax_errors="${{ steps.syntax.outputs.count || '0' }}"
          import_errors="${{ steps.imports.outputs.count || '0' }}"
          security_high="${{ steps.security.outputs.high || '0' }}"

          total=$((syntax_errors + import_errors + security_high))

          summary="æ§‹æ–‡ã‚¨ãƒ©ãƒ¼: ${syntax_errors}ä»¶, ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼: ${import_errors}ä»¶, ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£(High): ${security_high}ä»¶"

          echo "summary=$summary" >> $GITHUB_OUTPUT
          echo "total=$total" >> $GITHUB_OUTPUT

          echo "## ðŸ“Š ã‚¨ãƒ©ãƒ¼ã‚µãƒžãƒªãƒ¼" >> $GITHUB_STEP_SUMMARY
          echo "| ã‚«ãƒ†ã‚´ãƒª | ä»¶æ•° |" >> $GITHUB_STEP_SUMMARY
          echo "|---------|------|" >> $GITHUB_STEP_SUMMARY
          echo "| æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ | $syntax_errors |" >> $GITHUB_STEP_SUMMARY
          echo "| ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ | $import_errors |" >> $GITHUB_STEP_SUMMARY
          echo "| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£(High) | $security_high |" >> $GITHUB_STEP_SUMMARY
          echo "| **åˆè¨ˆ** | **$total** |" >> $GITHUB_STEP_SUMMARY

      - name: ðŸ“¤ ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
        if: steps.summary.outputs.total != '0'
        uses: actions/upload-artifact@v4
        with:
          name: error-reports
          path: |
            syntax_errors.txt
            import_errors.txt
            security_report.txt
          retention-days: 7

  # ============================================
  # Job 2: è‡ªå‹•ä¿®å¾©
  # ============================================
  auto-repair:
    name: ðŸ”§ è‡ªå‹•ä¿®å¾©
    needs: detect-errors
    runs-on: ubuntu-latest
    if: needs.detect-errors.outputs.total_errors != '0'
    timeout-minutes: 10

    steps:
      - name: ðŸ“¥ ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: ðŸ Pythonç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        uses: actions/setup-python@v5
        with:
          python-version: ${{ env.PYTHON_VERSION }}

      - name: ðŸ“¦ ä¿®å¾©ãƒ„ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: pip install black isort autoflake

      - name: ðŸ”§ è‡ªå‹•ä¿®å¾©å®Ÿè¡Œ
        id: repair
        run: |
          echo "ðŸ”§ è‡ªå‹•ä¿®å¾©ã‚’é–‹å§‹ã—ã¾ã™..."

          # æœªä½¿ç”¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆå‰Šé™¤
          autoflake --in-place --remove-all-unused-imports --recursive app modules || true

          # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ
          black app modules --quiet || true

          # ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ•´ç†
          isort app modules --quiet || true

          # ä¿®å¾©å¾Œã®ç¢ºèª
          flake8 app modules --count --select=E9,F63,F7,F82 > post_repair.txt 2>&1 || true
          remaining=$(tail -1 post_repair.txt | grep -oE '^[0-9]+' || echo "0")

          echo "remaining_errors=$remaining" >> $GITHUB_OUTPUT

          if [ "$remaining" -eq 0 ]; then
            echo "repair_status=success" >> $GITHUB_OUTPUT
            echo "âœ… å…¨ã‚¨ãƒ©ãƒ¼ä¿®å¾©å®Œäº†"
          else
            echo "repair_status=partial" >> $GITHUB_OUTPUT
            echo "âš ï¸ æ®‹å­˜ã‚¨ãƒ©ãƒ¼: $remaining ä»¶ï¼ˆæ‰‹å‹•å¯¾å¿œå¿…è¦ï¼‰"
          fi

      - name: ðŸ’¾ ä¿®å¾©ã‚³ãƒŸãƒƒãƒˆ
        id: commit
        run: |
          git config user.name "Auto Repair Bot"
          git config user.email "auto-repair@github-actions"

          if [ -n "$(git status --porcelain)" ]; then
            git add -A
            git commit -m "[è‡ªå‹•ä¿®å¾©] ${{ needs.detect-errors.outputs.error_summary }}

ä¿®å¾©ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${{ steps.repair.outputs.repair_status }}
æ®‹å­˜ã‚¨ãƒ©ãƒ¼: ${{ steps.repair.outputs.remaining_errors }}ä»¶

ðŸ¤– Auto Repair System (Enhanced)
Closes #56
"
            git push
            echo "committed=true" >> $GITHUB_OUTPUT
            echo "âœ… ä¿®å¾©ã‚’ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã—ã¾ã—ãŸ"
          else
            echo "committed=false" >> $GITHUB_OUTPUT
            echo "â„¹ï¸ å¤‰æ›´ãªã—ï¼ˆã‚³ãƒŸãƒƒãƒˆä¸è¦ï¼‰"
          fi

  # ============================================
  # Job 3: Issueè‡ªå‹•ä½œæˆ
  # ============================================
  create-issue:
    name: ðŸ“ Issueè‡ªå‹•ä½œæˆ
    needs: [detect-errors, auto-repair]
    runs-on: ubuntu-latest
    if: |
      always() &&
      needs.detect-errors.outputs.total_errors != '0' &&
      (needs.auto-repair.result == 'failure' || needs.auto-repair.outputs.repair_status == 'partial')
    timeout-minutes: 5

    steps:
      - name: ðŸ“¥ ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4

      - name: ðŸ” æ—¢å­˜Issueç¢ºèª
        id: check_issue
        uses: actions/github-script@v7
        with:
          script: |
            const { data: issues } = await github.rest.issues.listForRepo({
              owner: context.repo.owner,
              repo: context.repo.repo,
              state: 'open',
              labels: 'auto-repair,error'
            });

            const today = new Date().toISOString().split('T')[0];
            const existingIssue = issues.find(issue =>
              issue.title.includes('è‡ªå‹•ä¿®å¾©') &&
              issue.created_at.startsWith(today)
            );

            if (existingIssue) {
              core.setOutput('exists', 'true');
              core.setOutput('issue_number', existingIssue.number);
              console.log(`æ—¢å­˜Issue #${existingIssue.number} ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`);
            } else {
              core.setOutput('exists', 'false');
              console.log('æ–°è¦Issueä½œæˆãŒå¿…è¦ã§ã™');
            }

      - name: ðŸ“ æ–°è¦Issueä½œæˆ
        if: steps.check_issue.outputs.exists != 'true'
        uses: actions/github-script@v7
        with:
          script: |
            const errorSummary = '${{ needs.detect-errors.outputs.error_summary }}';
            const totalErrors = '${{ needs.detect-errors.outputs.total_errors }}';
            const runUrl = `https://github.com/${context.repo.owner}/${context.repo.repo}/actions/runs/${context.runId}`;

            const issue = await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: `ðŸš¨ [è‡ªå‹•æ¤œçŸ¥] ã‚¨ãƒ©ãƒ¼ ${totalErrors}ä»¶ - ${new Date().toISOString().split('T')[0]}`,
              body: `## ðŸ” è‡ªå‹•ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥ãƒ¬ãƒãƒ¼ãƒˆ

**æ¤œçŸ¥æ—¥æ™‚**: ${new Date().toISOString()}
**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œ**: [Run #${context.runNumber}](${runUrl})

## ðŸ“Š ã‚¨ãƒ©ãƒ¼ã‚µãƒžãƒªãƒ¼

${errorSummary}

## ðŸ”§ è‡ªå‹•ä¿®å¾©çµæžœ

è‡ªå‹•ä¿®å¾©ã‚’è©¦ã¿ã¾ã—ãŸãŒã€ä¸€éƒ¨ã®ã‚¨ãƒ©ãƒ¼ã¯æ‰‹å‹•å¯¾å¿œãŒå¿…è¦ã§ã™ã€‚

## ðŸ“‹ å¯¾å¿œæ‰‹é †

1. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
2. ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆï¼ˆArtifactsï¼‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
3. æ‰‹å‹•ã§ä¿®æ­£ã‚’å®Ÿæ–½
4. ä¿®æ­£å¾Œã€ã“ã®Issueã‚’Closeã—ã¦ãã ã•ã„

## ðŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [é–‹ç™ºçŠ¶æ³ãƒ¬ãƒãƒ¼ãƒˆ](docs/reports/development-status-report-2025-12-08.md)
- [è‡ªå‹•ä¿®å¾©ã‚·ã‚¹ãƒ†ãƒ å¼·åŒ–Issue](#56)

---
ðŸ¤– Auto Repair System (Enhanced)
`,
              labels: ['auto-repair', 'error', 'bug']
            });

            console.log(`Issue #${issue.data.number} ã‚’ä½œæˆã—ã¾ã—ãŸ`);

      - name: ðŸ“ æ—¢å­˜Issueã«ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
        if: steps.check_issue.outputs.exists == 'true'
        uses: actions/github-script@v7
        with:
          script: |
            const issueNumber = ${{ steps.check_issue.outputs.issue_number }};
            const errorSummary = '${{ needs.detect-errors.outputs.error_summary }}';
            const runUrl = `https://github.com/${context.repo.owner}/${context.repo.repo}/actions/runs/${context.runId}`;

            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issueNumber,
              body: `## ðŸ”„ è¿½åŠ ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥

**æ¤œçŸ¥æ—¥æ™‚**: ${new Date().toISOString()}
**ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œ**: [Run #${context.runNumber}](${runUrl})

### ðŸ“Š ã‚¨ãƒ©ãƒ¼ã‚µãƒžãƒªãƒ¼
${errorSummary}

---
ðŸ¤– Auto Repair System`
            });

            console.log(`Issue #${issueNumber} ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¾ã—ãŸ`);

  # ============================================
  # Job 4: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  # ============================================
  run-tests:
    name: ðŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
    needs: [detect-errors, auto-repair]
    runs-on: ubuntu-latest
    if: |
      always() &&
      (github.event.inputs.run_tests == 'true' || github.event_name == 'push')
    timeout-minutes: 15

    steps:
      - name: ðŸ“¥ ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4

      - name: ðŸ Pythonç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        uses: actions/setup-python@v5
        with:
          python-version: ${{ env.PYTHON_VERSION }}
          cache: 'pip'

      - name: ðŸ“¦ ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: |
          pip install pytest pytest-cov pytest-xdist
          pip install -r requirements.txt || true

      - name: ðŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        id: tests
        continue-on-error: true
        run: |
          pytest tests/ \
            --tb=short \
            --cov=app --cov=modules \
            --cov-report=term-missing \
            --cov-report=xml \
            -x \
            --timeout=60 \
            2>&1 | tee test_output.txt || true

          # ãƒ†ã‚¹ãƒˆçµæžœã‚’è§£æž
          if grep -q "passed" test_output.txt; then
            passed=$(grep -oE '[0-9]+ passed' test_output.txt | grep -oE '[0-9]+' || echo "0")
            failed=$(grep -oE '[0-9]+ failed' test_output.txt | grep -oE '[0-9]+' || echo "0")

            echo "passed=$passed" >> $GITHUB_OUTPUT
            echo "failed=$failed" >> $GITHUB_OUTPUT

            if [ "$failed" -eq 0 ]; then
              echo "status=success" >> $GITHUB_OUTPUT
            else
              echo "status=failure" >> $GITHUB_OUTPUT
            fi
          else
            echo "status=error" >> $GITHUB_OUTPUT
          fi

      - name: ðŸ“Š ãƒ†ã‚¹ãƒˆçµæžœã‚’ã‚µãƒžãƒªãƒ¼ã«è¿½åŠ 
        run: |
          echo "## ðŸ§ª ãƒ†ã‚¹ãƒˆçµæžœ" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY

          if [ "${{ steps.tests.outputs.status }}" == "success" ]; then
            echo "âœ… **ãƒ†ã‚¹ãƒˆæˆåŠŸ**" >> $GITHUB_STEP_SUMMARY
          elif [ "${{ steps.tests.outputs.status }}" == "failure" ]; then
            echo "âŒ **ãƒ†ã‚¹ãƒˆå¤±æ•—**" >> $GITHUB_STEP_SUMMARY
          else
            echo "âš ï¸ **ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼**" >> $GITHUB_STEP_SUMMARY
          fi

          echo "" >> $GITHUB_STEP_SUMMARY
          echo "| é …ç›® | ä»¶æ•° |" >> $GITHUB_STEP_SUMMARY
          echo "|------|------|" >> $GITHUB_STEP_SUMMARY
          echo "| Passed | ${{ steps.tests.outputs.passed || '0' }} |" >> $GITHUB_STEP_SUMMARY
          echo "| Failed | ${{ steps.tests.outputs.failed || '0' }} |" >> $GITHUB_STEP_SUMMARY

  # ============================================
  # Job 5: æˆåŠŸé€šçŸ¥
  # ============================================
  notify-success:
    name: âœ… æˆåŠŸé€šçŸ¥
    needs: [detect-errors, auto-repair, run-tests]
    runs-on: ubuntu-latest
    if: |
      always() &&
      needs.detect-errors.outputs.total_errors == '0'
    timeout-minutes: 2

    steps:
      - name: âœ… æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        run: |
          echo "## âœ… è‡ªå‹•ä¿®å¾©ã‚·ã‚¹ãƒ†ãƒ  - æ­£å¸¸å®Œäº†" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ã‚¨ãƒ©ãƒ¼ã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**æ¬¡å›žå®Ÿè¡Œ**: 15åˆ†å¾Œ" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "---" >> $GITHUB_STEP_SUMMARY
          echo "ðŸ¤– Auto Repair System (Enhanced)" >> $GITHUB_STEP_SUMMARY
