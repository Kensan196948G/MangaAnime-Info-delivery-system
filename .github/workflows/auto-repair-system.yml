name: ğŸ”„ Auto Repair System - CI/CD Failure Detection & Recovery
# è‡ªå‹•ä¿®å¾©ã‚·ã‚¹ãƒ†ãƒ ï¼šCI/CDéšœå®³æ¤œçŸ¥ãƒ»å¾©æ—§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

on:
  schedule:
    # 30åˆ†é–“éš”ã§å®Ÿè¡Œï¼ˆå¹³æ—¥ã®ã¿å®Ÿè¡Œã‚’æ¨å¥¨ï¼‰
    - cron: '*/30 * * * *'
  workflow_dispatch:
    inputs:
      force_repair:
        description: 'å¼·åˆ¶ä¿®å¾©ãƒ¢ãƒ¼ãƒ‰ï¼ˆå…¨ã¦ã®å¤±æ•—ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å¯¾è±¡ï¼‰'
        required: false
        default: 'false'
        type: boolean
      max_repairs:
        description: 'æœ€å¤§ä¿®å¾©å¯¾è±¡æ•°'
        required: false
        default: '10'
        type: string

env:
  # ä¿®å¾©ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆ25åˆ†ï¼‰
  REPAIR_TIMEOUT: 1500
  # æœ€å¤§ä¸¦åˆ—ä¿®å¾©æ•°
  MAX_PARALLEL_REPAIRS: 5
  # ãƒ«ãƒ¼ãƒ—å›æ•°
  MAX_LOOP_COUNT: 10

jobs:
  # ====================================
  # Phase 1: éšœå®³æ¤œçŸ¥ãƒ»åˆ†æãƒ•ã‚§ãƒ¼ã‚º
  # ====================================
  detect-failures:
    name: ğŸ” CI/CDéšœå®³æ¤œçŸ¥
    runs-on: ubuntu-latest
    outputs:
      failed_runs: ${{ steps.analyze.outputs.failed_runs }}
      repair_needed: ${{ steps.analyze.outputs.repair_needed }}
      error_matrix: ${{ steps.analyze.outputs.error_matrix }}
    
    steps:
      - name: ğŸ“¥ ãƒªãƒã‚¸ãƒˆãƒªãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          fetch-depth: 0

      - name: ğŸ” å¤±æ•—ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ¤œçŸ¥
        id: detect
        run: |
          echo "ğŸ” éå»24æ™‚é–“ã®å¤±æ•—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ¤œç´¢ä¸­..."
          
          # GitHub CLIã§å¤±æ•—ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å–å¾—
          failed_runs=$(gh run list \
            --status failure \
            --limit ${{ github.event.inputs.max_repairs || '10' }} \
            --json databaseId,workflowName,conclusion,createdAt,headBranch \
            --jq '.[] | select(.createdAt > (now - 86400 | strftime("%Y-%m-%dT%H:%M:%SZ")))')
          
          echo "failed_runs<<EOF" >> $GITHUB_OUTPUT
          echo "$failed_runs" >> $GITHUB_OUTPUT
          echo "EOF" >> $GITHUB_OUTPUT
          
          # å¤±æ•—æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
          failure_count=$(echo "$failed_runs" | jq length)
          echo "failure_count=$failure_count" >> $GITHUB_OUTPUT
          
          if [ "$failure_count" -gt 0 ]; then
            echo "âš ï¸ $failure_count ä»¶ã®å¤±æ•—ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ¤œå‡º"
          else
            echo "âœ… å¤±æ•—ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ"
          fi

      - name: ğŸ”¬ ã‚¨ãƒ©ãƒ¼è©³ç´°åˆ†æ
        id: analyze
        if: steps.detect.outputs.failure_count > 0
        run: |
          echo "ğŸ”¬ ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’åˆ†æä¸­..."
          
          failed_runs='${{ steps.detect.outputs.failed_runs }}'
          
          # ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ã”ã¨ã«åˆ†é¡
          error_matrix=$(echo "$failed_runs" | jq -r '[
            .[] | {
              run_id: .databaseId,
              workflow: .workflowName,
              branch: .headBranch,
              error_type: (
                if (.workflowName | contains("test")) then "test_failure"
                elif (.workflowName | contains("build")) then "build_failure"
                elif (.workflowName | contains("deploy")) then "deploy_failure"
                elif (.workflowName | contains("lint")) then "lint_failure"
                else "unknown_failure"
                end
              ),
              priority: (
                if (.workflowName | contains("deploy")) then 1
                elif (.workflowName | contains("build")) then 2
                elif (.workflowName | contains("test")) then 3
                else 4
                end
              ),
              repair_agent: (
                if (.workflowName | contains("test")) then "TestRepairAgent"
                elif (.workflowName | contains("build")) then "BuildRepairAgent"
                elif (.workflowName | contains("deploy")) then "DeployRepairAgent"
                elif (.workflowName | contains("lint")) then "LintRepairAgent"
                else "GeneralRepairAgent"
                end
              )
            }
          ] | sort_by(.priority)')
          
          echo "error_matrix<<EOF" >> $GITHUB_OUTPUT
          echo "$error_matrix" >> $GITHUB_OUTPUT
          echo "EOF" >> $GITHUB_OUTPUT
          
          echo "failed_runs<<EOF" >> $GITHUB_OUTPUT
          echo "$failed_runs" >> $GITHUB_OUTPUT
          echo "EOF" >> $GITHUB_OUTPUT
          
          echo "repair_needed=true" >> $GITHUB_OUTPUT
          
          echo "ğŸ“Š ã‚¨ãƒ©ãƒ¼åˆ†æçµæœ:"
          echo "$error_matrix" | jq -r '.[] | "  - \(.workflow) (\(.error_type)) -> \(.repair_agent)"'

  # ====================================
  # Phase 2: ä¸¦åˆ—ä¿®å¾©å®Ÿè¡Œãƒ•ã‚§ãƒ¼ã‚º
  # ====================================
  parallel-repair:
    name: ğŸ”§ ä¸¦åˆ—ä¿®å¾©å®Ÿè¡Œ
    runs-on: ubuntu-latest
    needs: detect-failures
    if: needs.detect-failures.outputs.repair_needed == 'true'
    strategy:
      matrix:
        include: ${{ fromJson(needs.detect-failures.outputs.error_matrix) }}
      fail-fast: false
      max-parallel: 5
    
    steps:
      - name: ğŸ“¥ ãƒªãƒã‚¸ãƒˆãƒªãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          fetch-depth: 0

      - name: ğŸ› ï¸ Pythonç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
          cache: 'pip'

      - name: ğŸ“¦ ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: |
          pip install --upgrade pip
          pip install requests pyyaml gitpython

      - name: ğŸ”§ SubAgentä¿®å¾©å®Ÿè¡Œ - ${{ matrix.repair_agent }}
        id: repair
        timeout-minutes: 25
        run: |
          echo "ğŸ¤– ${{ matrix.repair_agent }} ã«ã‚ˆã‚‹ä¿®å¾©ã‚’é–‹å§‹..."
          echo "å¯¾è±¡: ${{ matrix.workflow }} (Run ID: ${{ matrix.run_id }})"
          
          # ä¿®å¾©ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‘ã‚¹ã‚’æ±ºå®š
          case "${{ matrix.repair_agent }}" in
            "TestRepairAgent")
              repair_script=".github/scripts/repair-agents/test-repair-agent.py"
              ;;
            "BuildRepairAgent")
              repair_script=".github/scripts/repair-agents/build-repair-agent.py"
              ;;
            "DeployRepairAgent")
              repair_script=".github/scripts/repair-agents/deploy-repair-agent.py"
              ;;
            "LintRepairAgent")
              repair_script=".github/scripts/repair-agents/lint-repair-agent.py"
              ;;
            *)
              repair_script=".github/scripts/repair-agents/general-repair-agent.py"
              ;;
          esac
          
          # ä¿®å¾©ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå­˜åœ¨ã—ãªã„å ´åˆã¯æ±ç”¨ä¿®å¾©ã‚’å®Ÿè¡Œ
          if [ ! -f "$repair_script" ]; then
            echo "âš ï¸ å°‚ç”¨ä¿®å¾©ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚æ±ç”¨ä¿®å¾©ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚"
            repair_script=".github/scripts/repair-agents/general-repair-agent.py"
          fi
          
          # ä¿®å¾©å®Ÿè¡Œ
          if [ -f "$repair_script" ]; then
            python "$repair_script" \
              --run-id "${{ matrix.run_id }}" \
              --workflow "${{ matrix.workflow }}" \
              --error-type "${{ matrix.error_type }}" \
              --branch "${{ matrix.branch }}"
            repair_result=$?
          else
            echo "ğŸ”§ æ±ç”¨ä¿®å¾©ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè¡Œ..."
            
            # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å¤±æ•—ã®è©³ç´°ã‚’å–å¾—
            gh run view ${{ matrix.run_id }} --json jobs > /tmp/job_details.json
            
            # ä¸€èˆ¬çš„ãªä¿®å¾©ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨
            if [[ "${{ matrix.error_type }}" == "test_failure" ]]; then
              echo "ğŸ§ª ãƒ†ã‚¹ãƒˆå¤±æ•—ã®ä¿®å¾©ã‚’è©¦è¡Œ..."
              # ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ä¿®å¾©
              if [ -f "requirements.txt" ]; then
                # ä¾å­˜é–¢ä¿‚ã®æ›´æ–°
                pip list --outdated --format=json | jq -r '.[] | .name' | head -5 | while read package; do
                  echo "ğŸ“¦ $package ã‚’æ›´æ–°ä¸­..."
                  pip install --upgrade "$package" 2>/dev/null || true
                done
                pip freeze > requirements.txt
              fi
              
            elif [[ "${{ matrix.error_type }}" == "build_failure" ]]; then
              echo "ğŸ—ï¸ ãƒ“ãƒ«ãƒ‰å¤±æ•—ã®ä¿®å¾©ã‚’è©¦è¡Œ..."
              # Node.jsé–¢é€£ã®ä¿®å¾©
              if [ -f "package.json" ]; then
                npm ci --ignore-scripts 2>/dev/null || npm install --ignore-scripts 2>/dev/null || true
              fi
              
            elif [[ "${{ matrix.error_type }}" == "lint_failure" ]]; then
              echo "ğŸ“ Lintå¤±æ•—ã®ä¿®å¾©ã‚’è©¦è¡Œ..."
              # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®è‡ªå‹•ä¿®æ­£
              if command -v black &> /dev/null; then
                black . --exclude="/(\.git|\.venv|venv|node_modules)/" 2>/dev/null || true
              fi
              if command -v isort &> /dev/null; then
                isort . 2>/dev/null || true
              fi
            fi
            
            repair_result=0
          fi
          
          echo "repair_result=$repair_result" >> $GITHUB_OUTPUT
          
          if [ $repair_result -eq 0 ]; then
            echo "âœ… ä¿®å¾©ãŒå®Œäº†ã—ã¾ã—ãŸ"
          else
            echo "âŒ ä¿®å¾©ã«å¤±æ•—ã—ã¾ã—ãŸ (Exit code: $repair_result)"
          fi

      - name: ğŸ“ ä¿®å¾©çµæœã‚’ã‚³ãƒŸãƒƒãƒˆ
        if: steps.repair.outputs.repair_result == '0'
        run: |
          # Gitè¨­å®š
          git config --local user.email "action@github.com"
          git config --local user.name "Auto Repair Bot"
          
          # å¤‰æ›´ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
          if git diff --quiet; then
            echo "ğŸ“ å¤‰æ›´ãªã— - ã‚³ãƒŸãƒƒãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—"
          else
            echo "ğŸ“ ä¿®å¾©å†…å®¹ã‚’ã‚³ãƒŸãƒƒãƒˆä¸­..."
            
            git add .
            git commit -m "ğŸ¤– Auto-repair: Fix ${{ matrix.error_type }} in ${{ matrix.workflow }}

ä¿®å¾©ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: ${{ matrix.repair_agent }}
å¯¾è±¡ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼: ${{ matrix.workflow }}
Run ID: ${{ matrix.run_id }}
ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—: ${{ matrix.error_type }}

ğŸ¤– Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>"
            
            # ãƒ—ãƒƒã‚·ãƒ¥ã‚’è©¦è¡Œ
            git push origin HEAD:${{ matrix.branch }} || {
              echo "âš ï¸ ãƒ—ãƒƒã‚·ãƒ¥ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒªãƒ™ãƒ¼ã‚¹ã‚’è©¦è¡Œ..."
              git pull --rebase origin ${{ matrix.branch }}
              git push origin HEAD:${{ matrix.branch }}
            }
            
            echo "âœ… ä¿®å¾©å†…å®¹ã‚’ãƒ—ãƒƒã‚·ãƒ¥ã—ã¾ã—ãŸ"
          fi

  # ====================================
  # Phase 3: ä¿®å¾©çµæœæ¤œè¨¼ãƒ»ãƒ¬ãƒãƒ¼ãƒˆãƒ•ã‚§ãƒ¼ã‚º
  # ====================================
  verify-repairs:
    name: âœ… ä¿®å¾©çµæœæ¤œè¨¼
    runs-on: ubuntu-latest
    needs: [detect-failures, parallel-repair]
    if: always() && needs.detect-failures.outputs.repair_needed == 'true'
    
    steps:
      - name: ğŸ“¥ ãƒªãƒã‚¸ãƒˆãƒªãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: â³ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å†å®Ÿè¡Œã‚’å¾…æ©Ÿ
        run: |
          echo "â³ ä¿®å¾©ã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å†å®Ÿè¡Œã‚’å¾…æ©Ÿä¸­..."
          sleep 300  # 5åˆ†å¾…æ©Ÿ

      - name: ğŸ” ä¿®å¾©çµæœã‚’æ¤œè¨¼
        id: verify
        run: |
          echo "ğŸ” ä¿®å¾©çµæœã‚’æ¤œè¨¼ä¸­..."
          
          # æœ€æ–°ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡ŒçŠ¶æ³ã‚’ç¢ºèª
          recent_runs=$(gh run list --limit 20 --json databaseId,workflowName,conclusion,createdAt)
          
          # æˆåŠŸã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
          success_count=$(echo "$recent_runs" | jq '[.[] | select(.conclusion == "success" and (.createdAt > (now - 1800 | strftime("%Y-%m-%dT%H:%M:%SZ"))))] | length')
          
          # ä¿®å¾©å¯¾è±¡ã ã£ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ç¾åœ¨ã®çŠ¶æ³
          original_failures='${{ needs.detect-failures.outputs.failed_runs }}'
          
          echo "ğŸ“Š ä¿®å¾©çµæœã‚µãƒãƒªãƒ¼:"
          echo "  - éå»30åˆ†ã®æˆåŠŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼: $success_count ä»¶"
          
          # è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
          echo "repair_summary<<EOF" >> $GITHUB_OUTPUT
          echo "## ğŸ”„ Auto Repair System - å®Ÿè¡Œçµæœãƒ¬ãƒãƒ¼ãƒˆ" >> $GITHUB_OUTPUT
          echo "" >> $GITHUB_OUTPUT
          echo "**å®Ÿè¡Œæ™‚åˆ»:** $(date -u '+%Y-%m-%d %H:%M:%S UTC')" >> $GITHUB_OUTPUT
          echo "**æ¤œçŸ¥ã•ã‚ŒãŸå¤±æ•—:** $(echo '$original_failures' | jq length) ä»¶" >> $GITHUB_OUTPUT
          echo "**ä¿®å¾©å¾Œã®æˆåŠŸ:** $success_count ä»¶" >> $GITHUB_OUTPUT
          echo "" >> $GITHUB_OUTPUT
          echo "### ä¿®å¾©å¯¾è±¡ä¸€è¦§" >> $GITHUB_OUTPUT
          echo '$original_failures' | jq -r '.[] | "- **\(.workflowName)** (Run ID: \(.databaseId))"' >> $GITHUB_OUTPUT
          echo "" >> $GITHUB_OUTPUT
          echo "### ä¿®å¾©æˆ¦ç•¥" >> $GITHUB_OUTPUT
          echo "- **ä¸¦åˆ—å®Ÿè¡Œ:** æœ€å¤§5ã¤ã®SubAgentã«ã‚ˆã‚‹åŒæ™‚ä¿®å¾©" >> $GITHUB_OUTPUT
          echo "- **ã‚¨ãƒ©ãƒ¼åˆ†é¡:** è‡ªå‹•ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—æ¤œå‡ºã¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæŒ¯ã‚Šåˆ†ã‘" >> $GITHUB_OUTPUT
          echo "- **è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆ:** ä¿®å¾©å†…å®¹ã®è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥" >> $GITHUB_OUTPUT
          echo "" >> $GITHUB_OUTPUT
          echo "_ğŸ¤– Generated by Auto Repair System_" >> $GITHUB_OUTPUT
          echo "EOF" >> $GITHUB_OUTPUT

      - name: ğŸ“§ ä¿®å¾©ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        uses: actions/github-script@v6
        with:
          script: |
            const summary = `${{ steps.verify.outputs.repair_summary }}`;
            
            // ã‚¸ãƒ§ãƒ–ã‚µãƒãƒªãƒ¼ã«è¿½åŠ 
            await core.summary
              .addRaw(summary)
              .write();
            
            console.log("âœ… ä¿®å¾©ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¾ã—ãŸ");

  # ====================================
  # Phase 4: ç¶™ç¶šç›£è¦–ãƒ«ãƒ¼ãƒ—
  # ====================================
  schedule-next-cycle:
    name: ğŸ”„ æ¬¡å›ç›£è¦–ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
    runs-on: ubuntu-latest
    needs: [detect-failures, verify-repairs]
    if: always()
    
    steps:
      - name: ğŸ“… æ¬¡å›å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç¢ºèª
        run: |
          echo "ğŸ“… æ¬¡å›ã®è‡ªå‹•ä¿®å¾©ç›£è¦–:"
          echo "  - 30åˆ†å¾Œã«è‡ªå‹•å®Ÿè¡Œ"
          echo "  - æ‰‹å‹•å®Ÿè¡Œ: workflow_dispatch ãƒˆãƒªã‚¬ãƒ¼ä½¿ç”¨å¯èƒ½"
          echo ""
          echo "ğŸ”„ ç¶™ç¶šç›£è¦–ãƒ«ãƒ¼ãƒ—è¨­å®š:"
          echo "  - ç›£è¦–é–“éš”: 30åˆ†"
          echo "  - æœ€å¤§ä¸¦åˆ—ä¿®å¾©: ${{ env.MAX_PARALLEL_REPAIRS }}"
          echo "  - ä¿®å¾©ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: ${{ env.REPAIR_TIMEOUT }}ç§’"
          echo "  - æœ€å¤§ãƒ«ãƒ¼ãƒ—å›æ•°: ${{ env.MAX_LOOP_COUNT }}"
          echo ""
          echo "âœ… Auto Repair System ã¯ç¶™ç¶šç›£è¦–ä¸­ã§ã™"

      - name: ğŸ¯ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ææ¡ˆ
        run: |
          echo "ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æœ€é©åŒ–ææ¡ˆ:"
          echo ""
          echo "1. **ä¸¦åˆ—åº¦èª¿æ•´:**"
          echo "   - ç¾åœ¨: æœ€å¤§5ä¸¦åˆ—"
          echo "   - æ¨å¥¨: ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³ã«å¿œã˜ã¦3-8ã«èª¿æ•´"
          echo ""
          echo "2. **ç›£è¦–é »åº¦æœ€é©åŒ–:**"
          echo "   - ç¾åœ¨: 30åˆ†é–“éš”"
          echo "   - æ¨å¥¨: é‡è¦æ™‚é–“å¸¯ã¯15åˆ†ã€å¤œé–“ã¯60åˆ†é–“éš”"
          echo ""
          echo "3. **ä¿®å¾©æˆåŠŸç‡å‘ä¸Š:**"
          echo "   - SubAgentå°‚ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å……å®Ÿ"
          echo "   - ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’æ©Ÿèƒ½ã®è¿½åŠ "
          echo "   - ä¿®å¾©å¾Œã®è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"